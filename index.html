<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>หน้าดาวน์โหลดวิดีโอ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .text-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* Focus ring effect */
            border-color: #3b82f6; /* Blue border on focus */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Main Container -->
    <div class="w-full max-w-md mx-auto bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-500 hover:scale-105">
        <div class="text-center">
            <!-- Header and Description -->
            <!-- Icon is replaced with a simple emoji to avoid external library dependencies -->
            <p class="text-6xl text-blue-600 mb-4">▶️</p>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ดาวน์โหลดวิดีโอ</h1>
            <p class="text-gray-500 mb-6">
                วางลิงก์วิดีโอที่ต้องการดาวน์โหลดในช่องด้านล่าง
            </p>
        </div>

        <!-- Input field for video link -->
        <div class="mb-4">
            <input
                type="text"
                id="video-link-input"
                class="w-full p-3 border-2 border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-300"
                placeholder="วางลิงก์วิดีโอที่นี่..."
            />
        </div>

        <!-- Download Button -->
        <button
            id="download-button"
            class="w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-300 disabled:bg-blue-400"
            disabled
        >
            <!-- Icon is replaced with an emoji -->
            ⬇️ ดาวน์โหลด
        </button>

        <!-- Download Status Section (initially hidden) -->
        <div id="download-status-container" class="mt-6 hidden">
            <!-- Status message -->
            <div id="download-message" class="text-center text-sm font-medium text-gray-600 mb-2">
                กำลังเตรียมไฟล์...
            </div>
            <!-- Progress bar -->
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="progress-bar bg-green-500 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <script>
        // Get DOM elements
        const videoLinkInput = document.getElementById('video-link-input');
        const downloadButton = document.getElementById('download-button');
        const downloadStatusContainer = document.getElementById('download-status-container');
        const downloadMessage = document.getElementById('download-message');
        const progressBar = document.getElementById('progress-bar');

        // Enable/disable the download button based on input
        videoLinkInput.addEventListener('input', () => {
            if (videoLinkInput.value.trim() !== '') {
                downloadButton.disabled = false;
            } else {
                downloadButton.disabled = true;
            }
        });

        // Function to handle the download button click
        downloadButton.addEventListener('click', () => {
            const videoUrl = videoLinkInput.value.trim();

            if (videoUrl) {
                // Disable button and show download status
                downloadButton.disabled = true;
                downloadButton.classList.add('hidden');
                downloadStatusContainer.classList.remove('hidden');

                downloadMessage.textContent = 'กำลังดาวน์โหลด... (0%)';
                progressBar.style.width = '0%';

                // Simulate download process
                let progress = 0;
                const downloadInterval = setInterval(() => {
                    progress += Math.random() * 10; // Increase progress randomly
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(downloadInterval); // Stop simulation

                        // Show completion status
                        downloadMessage.textContent = 'ดาวน์โหลดเสร็จสมบูรณ์!';
                        progressBar.style.width = '100%';

                        // Open the URL in a new tab to trigger download
                        window.open(videoUrl, '_blank');

                        // Reset UI after a delay
                        setTimeout(() => {
                            downloadButton.classList.remove('hidden');
                            downloadButton.textContent = 'ดาวน์โหลดอีกครั้ง';
                            downloadButton.disabled = false;
                            downloadStatusContainer.classList.add('hidden');
                            videoLinkInput.value = ''; // Clear input field

                            // Reset progress bar
                            progressBar.style.width = '0%';
                            downloadMessage.textContent = 'กำลังเตรียมไฟล์...';
                        }, 2000); // Wait 2 seconds before resetting
                    } else {
                        // Update progress bar and message
                        progressBar.style.width = `${progress}%`;
                        downloadMessage.textContent = `กำลังดาวน์โหลด... (${Math.floor(progress)}%)`;
                    }
                }, 500); // Update every 0.5 seconds
            }
        });
    </script>
</body>
</html>
